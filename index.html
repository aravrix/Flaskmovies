<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flaskmovies - Watch movies for free</title>
    <meta name="description" content="Explore a diverse range of free and legal movies available on YouTube. Enjoy high-quality films without spending a dime. Start watching now!">
    <meta name="keywords" content="Free Movies, Free, Youtube Movies"/>
</head>
<body>
    <div class="Text">
        <h1 class="logo">Flaskmovies</h1>
        <b>Always free! 100% Legal</b>
    </div>
    <br>
    <div class="video-container">
        <lite-youtube videoid="BSYAPKgcgj0"></lite-youtube>
        <lite-youtube videoid="Z2fOOIXHg8E"></lite-youtube>
        <lite-youtube videoid="ttIWmYaknCg"></lite-youtube>
        <lite-youtube videoid="t05rpOyQK4k"></lite-youtube>
        <lite-youtube videoid="Nm5acz1LSOc"></lite-youtube>
        <lite-youtube videoid="OrOYvVf6tIM"></lite-youtube>
    </div>

    <script>
        class LiteYTEmbed extends HTMLElement {
            static currentVideo = null;  // Track the currently playing video

            connectedCallback() {
                this.videoId = this.getAttribute('videoid');

                let playBtnEl = this.querySelector('.lty-playbtn');
                this.playLabel = (playBtnEl && playBtnEl.textContent.trim()) || this.getAttribute('playlabel') || 'Play';

                this.dataset.title = this.getAttribute('title') || "";

                if (!this.style.backgroundImage) {
                    this.style.backgroundImage = `url("https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg")`;
                    this.upgradePosterImage();
                }

                if (!playBtnEl) {
                    playBtnEl = document.createElement('button');
                    playBtnEl.type = 'button';
                    playBtnEl.classList.add('lty-playbtn');
                    this.append(playBtnEl);
                }

                if (!playBtnEl.textContent) {
                    const playBtnLabelEl = document.createElement('span');
                    playBtnLabelEl.className = 'lyt-visually-hidden';
                    playBtnLabelEl.textContent = this.playLabel;
                    playBtnEl.append(playBtnLabelEl);
                }

                this.addNoscriptIframe();

                playBtnEl.addEventListener('click', this.activate.bind(this));
            }

            addNoscriptIframe() {
                const iframeEl = this.createBasicIframe();
                const noscriptEl = document.createElement('noscript');
                noscriptEl.innerHTML = iframeEl.outerHTML;
                this.append(noscriptEl);
            }

            createBasicIframe() {
                const iframeEl = document.createElement('iframe');
                iframeEl.width = 560;
                iframeEl.height = 315;
                iframeEl.title = this.playLabel;
                iframeEl.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';
                iframeEl.allowFullscreen = true;
                iframeEl.src = `https://www.youtube-nocookie.com/embed/${encodeURIComponent(this.videoId)}?autoplay=1&playsinline=1`;
                return iframeEl;
            }

            async activate() {
                if (this.classList.contains('lyt-activated')) return;
                this.classList.add('lyt-activated');

                if (LiteYTEmbed.currentVideo && LiteYTEmbed.currentVideo !== this) {
                    LiteYTEmbed.currentVideo.stopVideo();  // Stop the currently playing video
                }

                const iframeEl = this.createBasicIframe();
                this.append(iframeEl);

                iframeEl.focus();
                LiteYTEmbed.currentVideo = this;  // Set the current video to the one being activated
            }

            stopVideo() {
                const iframe = this.querySelector('iframe');
                if (iframe) {
                    iframe.src = '';  // Reset the iframe src to stop the video
                    iframe.remove();  // Optionally remove the iframe
                    this.classList.remove('lyt-activated');
                }
            }

            upgradePosterImage() {
                setTimeout(() => {
                    const webpUrl = `https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`;
                    const img = new Image();
                    img.fetchPriority = 'low';
                    img.src = webpUrl;
                    img.onload = e => {
                        const noAvailablePoster = e.target.naturalHeight == 90 && e.target.naturalWidth == 120;
                        if (noAvailablePoster) return;
                        this.style.backgroundImage = `url("${webpUrl}")`;
                    }
                }, 100);
            }
        }

        customElements.define('lite-youtube', LiteYTEmbed);
    </script>
</body>
</html>